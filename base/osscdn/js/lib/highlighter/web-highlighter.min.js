/*! web-highlighter v0.3.3 https://github.com/alienzhou/web-highlighter */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Highlighter=t():e.Highlighter=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(13);t.ID_DIVISION=";",t.LOCAL_STORE_KEY="highlight-mengshou",t.STYLESHEET_ID="highlight-mengshou-style",t.WRAP_TAG="span",t.DATASET_IDENTIFIER="highlight-id",t.DATASET_IDENTIFIER_EXTRA="highlight-id-extra",t.DATASET_SPLIT_TYPE="highlight-split-type",t.CAMEL_DATASET_IDENTIFIER=r.default(t.DATASET_IDENTIFIER),t.CAMEL_DATASET_IDENTIFIER_EXTRA=r.default(t.DATASET_IDENTIFIER_EXTRA),t.CAMEL_DATASET_SPLIT_TYPE=r.default(t.DATASET_SPLIT_TYPE),t.DEFAULT_OPTIONS={$root:window.document.documentElement,exceptSelectors:null,style:{className:"highlight-mengshou-wrap"}};var o=t.DEFAULT_OPTIONS.style;t.STYLESHEET_TEXT="\n    ."+o.className+" {\n        background: #ff9;\n        cursor: pointer;\n    }\n    ."+o.className+".active {\n        background: #ffb;\n    }\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.none="none",e.head="head",e.tail="tail",e.both="both"}(t.SplitType||(t.SplitType={})),function(e){e.DOM_TYPE_ERROR="[DOM] Receive wrong node type.",e.DOM_SELECTION_EMPTY="[DOM] The selection contains no dom node, may be you except them.",e.RANGE_INVALID="[RANGE] Got invalid dom range, can't convert to a valid highlight range.",e.RANGE_NODE_INVALID="[RANGE] Start or end node isn't a text node, it may occur an error.",e.DB_ID_DUPLICATE_ERROR="[STORE] Unique id conflict.",e.CACHE_SET_ERROR="[CACHE] Cache.data can't be set manually, please use .save().",e.SOURCE_TYPE_ERROR="[SOURCE] Object isn't a highlight source instance.",e.HIGHLIGHT_RANGE_FROZEN="[HIGHLIGHT_RANGE] A highlight range must be frozen before render.",e.HIGHLIGHT_SOURCE_NONE_RENDER="[HIGHLIGHT_SOURCE] This highlight source isn't rendered. May be the exception skips it or the dom structure has changed."}(t.ERROR||(t.ERROR={})),function(e){e.CREATE="selection:create",e.REMOVE="selection:remove",e.MODIFY="selection:modify",e.HOVER="selection:hover",e.HOVER_OUT="selection:hover-out",e.CLICK="selection:click"}(t.EventType||(t.EventType={})),function(e){e.text="text",e.span="span"}(t.SelectedNodeType||(t.SelectedNodeType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=n(10),i=function(){function e(e,t,n,r,o){this.startMeta=e,this.endMeta=t,this.text=n,this.id=r,this.__isHighlightSource={},o&&(this.extra=o)}return e.prototype.deSerialize=function(e){var t=o.queryElementNode(this,e),n=t.start,i=t.end,a=o.getTextChildByOffset(n,this.startMeta.textOffset),s=o.getTextChildByOffset(i,this.endMeta.textOffset);return new r.default(a,s,this.text,this.id,!0)},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.isHighlightWrapNode=function(e){return!!e.dataset&&!!e.dataset[r.CAMEL_DATASET_IDENTIFIER]},t.getHighlightId=function(e){return t.isHighlightWrapNode(e)?e.dataset[r.CAMEL_DATASET_IDENTIFIER]:""},t.getHighlightsByRoot=function(e){Array.isArray(e)||(e=[e]);for(var t=[],n=0;n<e.length;n++){var o=e[n].querySelectorAll(r.WRAP_TAG+"[data-"+r.DATASET_IDENTIFIER+"]");t.concat(o)}return t},t.getHighlightById=function(e,t){for(var n=[],o=new RegExp("("+t+"\\"+r.ID_DIVISION+"|\\"+r.ID_DIVISION+"?"+t+"$)"),i=e.querySelectorAll(r.WRAP_TAG+"[data-"+r.DATASET_IDENTIFIER+"]"),a=0;a<i.length;a++){var s=i[a];if(s.dataset[r.CAMEL_DATASET_IDENTIFIER]!==t){var l=s.dataset[r.CAMEL_DATASET_IDENTIFIER_EXTRA];o.test(l)&&n.push(s)}else n.push(s)}return n},t.forEach=function(e,t){for(var n=0;n<e.length;n++)t(e[n],n,e)}},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.handlersMap=Object.create(null)}return e.prototype.on=function(e,t){return this.handlersMap[e]||(this.handlersMap[e]=[]),this.handlersMap[e].push(t),this},e.prototype.off=function(e,t){return this.handlersMap[e]&&this.handlersMap[e].splice(this.handlersMap[e].indexOf(t)>>>0,1),this},e.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return this.handlersMap[e]&&this.handlersMap[e].slice().forEach(function(e){return e.apply(void 0,o(t))}),this},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(1),i=n(11),a=n(6),s=n(12),l=function(){function e(e,t,n,r,i){void 0===i&&(i=!1),3===e.$node.nodeType&&3===t.$node.nodeType||console.warn(o.ERROR.RANGE_NODE_INVALID),this.start=e,this.end=t,this.text=n,this.frozen=i,this.id=r}return e.fromSelection=function(t){var n=i.getDomRange();if(!n)return null;var r={$node:n.startContainer,offset:n.startOffset},o={$node:n.endContainer,offset:n.endOffset},s=n.toString(),l=t.call(r,o,s);return new e(r,o,s,l=null!=l?l:a.default())},e.prototype.serialize=function(e,t){var n,o=s.getDomMeta(this.start.$node,this.start.offset,e),i=s.getDomMeta(this.end.$node,this.end.offset,e);return t.Serialize.RecordInfo.isEmpty()||(n=t.Serialize.RecordInfo.call(this.start,this.end,e)),this.frozen=!0,new r.default(o,i,this.text,this.id,n)},e.removeDomRange=i.removeSelection,e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)}},function(e,t,n){e.exports=n(8)},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),n(9);var a=n(4),s=n(1),l=n(5),u=n(2),d=n(3),c=n(0),f=n(6),h=n(14),p=n(15),E=n(16),T=function(e){function t(t){var n=e.call(this)||this;return n._getHooks=function(){return{Render:{UUID:new h.default("Render.UUID"),SelectedNodes:new h.default("Render.SelectedNodes"),WrapNode:new h.default("Render.WrapNode")},Serialize:{RecordInfo:new h.default("Serialize.RecordInfo")},Remove:{UpdateNodes:new h.default("Remove.UpdateNodes")}}},n._highlighFromHRange=function(e){var t=e.serialize(n.options.$root,n.hooks);return 0===n.painter.highlightRange(e).length?(console.warn(s.ERROR.DOM_SELECTION_EMPTY),null):(n.cache.save(t),n.emit(s.EventType.CREATE,{sources:[t],type:"from-input"},n),t)},n._handleSelection=function(e){var t=l.default.fromSelection(n.hooks.Render.UUID);t&&(n._highlighFromHRange(t),l.default.removeDomRange())},n._handleHighlightHover=function(e){var t=e.target;if(!d.isHighlightWrapNode(t))return n._hoverId&&n.emit(s.EventType.HOVER_OUT,{id:n._hoverId},n,e),void(n._hoverId=null);var r=d.getHighlightId(t);n._hoverId!==r&&(n._hoverId&&n.emit(s.EventType.HOVER_OUT,{id:n._hoverId},n,e),n._hoverId=r,n.emit(s.EventType.HOVER,{id:n._hoverId},n,e))},n._handleHighlightClick=function(e){var t=e.target;if(d.isHighlightWrapNode(t)){var r=d.getHighlightId(t);n.emit(s.EventType.CLICK,{id:r},n,e)}else;},n.run=function(){return n.options.$root.addEventListener("mouseup",n._handleSelection)},n.stop=function(){return n.options.$root.removeEventListener("mouseup",n._handleSelection)},n.addClass=function(e,t){return n.getDoms(t).forEach(function(t){return t.classList.add(e)})},n.removeClass=function(e,t){return n.getDoms(t).forEach(function(t){return t.classList.remove(e)})},n.getIdByDom=function(e){return d.getHighlightId(e)},n.getDoms=function(e){return e?d.getHighlightById(n.options.$root,e):d.getHighlightsByRoot(n.options.$root)},n.dispose=function(){n.options.$root.removeEventListener("mouseover",n._handleHighlightHover),n.options.$root.removeEventListener("mouseup",n._handleSelection),n.options.$root.removeEventListener("click",n._handleHighlightClick),n.removeAll()},n.setOption=function(e){n.options=i({},n.options,e),n.painter=new E.default({$root:n.options.$root,className:n.options.style.className,exceptSelectors:n.options.exceptSelectors},n.hooks)},n.fromRange=function(e){var t={$node:e.startContainer,offset:e.startOffset},r={$node:e.endContainer,offset:e.endOffset},o=e.toString(),i=n.hooks.Render.UUID.call(t,r,o);i=null!=i?i:f.default();var a=new l.default(t,r,o,i);return a?n._highlighFromHRange(a):(console.warn(s.ERROR.RANGE_INVALID),null)},n.fromStore=function(e,t,r,o){try{var i=new u.default(e,t,r,o);return n._highlighFromHSource(i),i}catch(n){return console.error(n,o,r,e,t),null}},n.options=c.DEFAULT_OPTIONS,n.hooks=n._getHooks(),n.setOption(t),n.cache=new p.default,n.options.$root.addEventListener("mouseover",n._handleHighlightHover),n.options.$root.addEventListener("click",n._handleHighlightClick),n}return o(t,e),t.prototype._highlighFromHSource=function(e){void 0===e&&(e=[]);var t=this.painter.highlightSource(e);this.emit(s.EventType.CREATE,{sources:t,type:"from-store"},this),this.cache.save(e)},t.prototype.remove=function(e){e&&(this.painter.removeHighlight(e),this.cache.remove(e),this.emit(s.EventType.REMOVE,{ids:[e]},this))},t.prototype.removeAll=function(){this.painter.removeAllHighlight();var e=this.cache.removeAll();this.emit(s.EventType.REMOVE,{ids:e},this)},t.event=s.EventType,t}(a.default);t.default=T},function(e,t){!function(){if(!(document.documentElement.dataset||Object.getOwnPropertyDescriptor(HTMLElement.prototype,"dataset")&&Object.getOwnPropertyDescriptor(HTMLElement.prototype,"dataset").get)){var e={enumerable:!0,get:function(){var t={},n=this.attributes;function r(e){return e.charAt(1).toUpperCase()}function o(){return this.value}function i(e,t){void 0!==t?this.setAttribute(e,t):this.removeAttribute(e)}for(var a=0;a<n.length;a++){var s=n[a];if(s&&s.name&&/^data-\w[\w-]*$/.test(s.name)){var l=s.name,u=s.value,d=l.substr(5).replace(/-./g,r);Object.defineProperty(t,d,{enumerable:e.enumerable,get:o.bind({value:u||""}),set:i.bind(this,l)})}}return t}};Object.defineProperty(HTMLElement.prototype,"dataset",e)}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTextChildByOffset=function(e,t){for(var n=[e],r=null,o=0,i=0;r=n.pop();){for(var a=r.childNodes,s=a.length-1;s>=0;s--)n.push(a[s]);if(3===r.nodeType&&(i=t-o,(o+=r.textContent.length)>=t))break}return r||(r=e),{$node:r,offset:i}},t.queryElementNode=function(e,t){return{start:t.getElementsByTagName(e.startMeta.parentTagName)[e.startMeta.parentIndex],end:t.getElementsByTagName(e.endMeta.parentTagName)[e.endMeta.parentIndex]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDomRange=function(){var e=window.getSelection();return e.isCollapsed?(console.debug("no text selected"),null):e.getRangeAt(0)},t.removeSelection=function(){window.getSelection().removeAllRanges()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.getDomMeta=function(e,t,n){var o=function(e){if(e instanceof HTMLElement&&(!e.dataset||!e.dataset[r.CAMEL_DATASET_IDENTIFIER]))return e;for(var t=e.parentNode;t.dataset&&t.dataset[r.CAMEL_DATASET_IDENTIFIER];)t=t.parentNode;return t}(e),i=function(e,t){for(var n=e.tagName,r=t.getElementsByTagName(n),o=0;o<r.length;o++)if(e===r[o])return o;return-1}(o,n),a=function(e,t){for(var n=[e],r=null,o=0;r=n.pop();){for(var i=r.childNodes,a=i.length-1;a>=0;a--)n.push(i[a]);if(3===r.nodeType&&r!==t)o+=r.textContent.length;else if(3===r.nodeType)break}return o}(o,e);return{parentTagName:o.tagName,parentIndex:i,textOffset:a+t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.split("-").reduce(function(e,t,n){return e+(0===n?t:t[0].toUpperCase()+t.slice(1))},"")}},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.name="",this.ops=[],this.name=e}return e.prototype.tap=function(e){return this.ops.push(e),this},e.prototype.isEmpty=function(){return 0===this.ops.length},e.prototype.call=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.ops.reduce(function(t,n){return n.apply(void 0,o(e))},null)},e}();t.default=i},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),s=n(1),l=function(e){function t(){var t=e.call(this)||this;return t._data=new Map,t}return o(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this.getAll()},set:function(e){throw s.ERROR.CACHE_SET_ERROR},enumerable:!0,configurable:!0}),t.prototype.save=function(e){var t=this;Array.isArray(e)?e.forEach(function(e){return t._data.set(e.id,e)}):this._data.set(e.id,e)},t.prototype.get=function(e){return this._data.get(e)},t.prototype.remove=function(e){this._data.delete(e)},t.prototype.getAll=function(){var e,t,n=[];this._data=new Map;try{for(var r=i(this._data),o=r.next();!o.done;o=r.next()){var a=o.value;n.push(a[1])}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},t.prototype.removeAll=function(){var e,t,n=[];try{for(var r=i(this._data),o=r.next();!o.done;o=r.next()){var a=o.value;n.push(a[0])}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return this._data=new Map,n},t}(a.default);t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(17),i=n(3),a=n(1),s=n(18),l=n(0),u=function(){function e(e,t){this.options={$root:e.$root,exceptSelectors:e.exceptSelectors,className:e.className},this.hooks=t,s.initDefaultStylesheet()}return e.prototype.highlightRange=function(e){if(!e.frozen)throw a.ERROR.HIGHLIGHT_RANGE_FROZEN;var t=this.options,n=t.$root,r=t.className,i=t.exceptSelectors,s=this.hooks,l=o.getSelectedNodes(n,e.start,e.end,i);return s.Render.SelectedNodes.isEmpty()||(l=s.Render.SelectedNodes.call(e.id,l)),l.map(function(t){var n=o.wrapHighlight(t,e,r);return s.Render.WrapNode.isEmpty()||(n=s.Render.WrapNode.call(e.id,n)),n})},e.prototype.highlightSource=function(e){var t=this,n=Array.isArray(e)?e:[e],o=[];return n.forEach(function(e){if(e instanceof r.default){var n=e.deSerialize(t.options.$root);t.highlightRange(n).length>0?o.push(e):console.warn(a.ERROR.HIGHLIGHT_SOURCE_NONE_RENDER,e)}else console.error(a.ERROR.SOURCE_TYPE_ERROR)}),o},e.prototype.removeHighlight=function(e){for(var t=new RegExp("("+e+"\\"+l.ID_DIVISION+"|\\"+l.ID_DIVISION+"?"+e+"$)"),n=this.hooks,r=document.querySelectorAll(l.WRAP_TAG+"[data-"+l.DATASET_IDENTIFIER+"]"),a=[],s=[],u=[],d=0;d<r.length;d++){var c=r[d].dataset[l.CAMEL_DATASET_IDENTIFIER],f=r[d].dataset[l.CAMEL_DATASET_IDENTIFIER_EXTRA];c!==e||f?c===e?s.push(r[d]):c!==e&&t.test(f)&&u.push(r[d]):a.push(r[d])}a.forEach(function(t){var r=t.parentNode,a=document.createDocumentFragment();i.forEach(t.childNodes,function(e){return a.appendChild(e.cloneNode(!1))});var s=t.previousSibling,l=t.nextSibling;r.replaceChild(a,t),o.normalizeSiblingText(s,!0),o.normalizeSiblingText(l,!1),n.Remove.UpdateNodes.call(e,t,"remove")}),s.forEach(function(t){var r=t.dataset,o=r[l.CAMEL_DATASET_IDENTIFIER_EXTRA].split(l.ID_DIVISION);r[l.CAMEL_DATASET_IDENTIFIER]=o.shift(),r[l.CAMEL_DATASET_IDENTIFIER_EXTRA]=o.join(l.ID_DIVISION),n.Remove.UpdateNodes.call(e,t,"id-update")}),u.forEach(function(r){var o=r.dataset[l.CAMEL_DATASET_IDENTIFIER_EXTRA];r.dataset[l.CAMEL_DATASET_IDENTIFIER_EXTRA]=o.replace(t,""),n.Remove.UpdateNodes.call(e,r,"extra-update")})},e.prototype.removeAllHighlight=function(){i.getHighlightsByRoot(this.options.$root).forEach(function(e){var t=e.parentNode,n=document.createDocumentFragment();i.forEach(e.childNodes,function(e){return n.appendChild(e.cloneNode(!1))}),t.replaceChild(n,e)})},e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(3),i=n(0),a=function(e,t){if(!e)return!1;if(/^\./.test(t)){var n=t.replace(/^\./,"");return e&&e.classList.contains(n)}if(/^#/.test(t)){var r=t.replace(/^#/,"");return e&&e.id===r}var o=t.toUpperCase();return e&&e.tagName===o};function s(e,t){var n=Array.isArray(t)?t:[t];return(n=0===n.length?[i.DEFAULT_OPTIONS.style.className]:n).forEach(function(t){return e.classList.add(t)}),e}t.getSelectedNodes=function(e,t,n,o){var i=t.$node,s=n.$node,l=t.offset,u=n.offset;if(i===s&&i instanceof Text)return function(e,t,n,o){for(var i=e;i;){if(1===i.nodeType&&o&&o.some(function(e){return a(i,e)}))return[];i=i.parentNode}e.splitText(t);var s=e.nextSibling;return s.splitText(n-t),[{$node:s,type:r.SelectedNodeType.text,splitType:r.SplitType.both}]}(i,l,u,o);for(var d=[e],c=[],f=!1,h=null;h=d.pop();)if(1!==h.nodeType||!o||!o.some(function(e){return a(h,e)})){for(var p=h.childNodes,E=p.length-1;E>=0;E--)d.push(p[E]);if(h===i){if(3===h.nodeType){h.splitText(l);var T=h.nextSibling;c.push({$node:T,type:r.SelectedNodeType.text,splitType:r.SplitType.head})}f=!0}else{if(h===s){if(3===h.nodeType)(T=h).splitText(u),c.push({$node:T,type:r.SelectedNodeType.text,splitType:r.SplitType.tail});break}f&&3===h.nodeType&&c.push({$node:h,type:r.SelectedNodeType.text,splitType:r.SplitType.none})}}return c},t.wrapHighlight=function(e,t,n){var a=e.$node.parentNode,l=e.$node.previousSibling,u=e.$node.nextSibling;return o.isHighlightWrapNode(a)?o.isHighlightWrapNode(a)&&(l||u)?function(e,t,n){var o=document.createElement(i.WRAP_TAG),a=e.$node.parentNode,l=e.$node.previousSibling,u=e.$node.nextSibling,d=document.createDocumentFragment(),c=a.dataset[i.CAMEL_DATASET_IDENTIFIER],f=a.dataset[i.CAMEL_DATASET_IDENTIFIER_EXTRA],h=f?c+i.ID_DIVISION+f:c;o.setAttribute("data-"+i.DATASET_IDENTIFIER,t.id),o.setAttribute("data-"+i.DATASET_IDENTIFIER_EXTRA,h),o.appendChild(e.$node.cloneNode(!1));var p,E,T=!1,_=!1;return l&&((E=a.cloneNode(!1)).textContent=l.textContent,d.appendChild(E),T=!0),s(o,n),d.appendChild(o),u&&((E=a.cloneNode(!1)).textContent=u.textContent,d.appendChild(E),_=!0),p=T&&_?r.SplitType.both:T?r.SplitType.head:_?r.SplitType.tail:r.SplitType.none,o.setAttribute("data-"+i.DATASET_SPLIT_TYPE,p),a.parentNode.replaceChild(d,a),o}(e,t,n):function(e,t,n){var r=e.$node.parentNode,o=r;s(o,n);var a=r.dataset,l=a[i.CAMEL_DATASET_IDENTIFIER];return a[i.CAMEL_DATASET_IDENTIFIER]=t.id,a[i.CAMEL_DATASET_IDENTIFIER_EXTRA]=a[i.CAMEL_DATASET_IDENTIFIER_EXTRA]?l+i.ID_DIVISION+a[i.CAMEL_DATASET_IDENTIFIER_EXTRA]:l,o}(e,t,n):function(e,t,n){var r;return s(r=document.createElement(i.WRAP_TAG),n),r.appendChild(e.$node.cloneNode(!1)),e.$node.parentNode.replaceChild(r,e.$node),r.setAttribute("data-"+i.DATASET_IDENTIFIER,t.id),r.setAttribute("data-"+i.DATASET_SPLIT_TYPE,e.splitType),r.setAttribute("data-"+i.DATASET_IDENTIFIER_EXTRA,""),r}(e,t,n)},t.normalizeSiblingText=function(e,t){if(void 0===t&&(t=!0),e&&3===e.nodeType){var n=t?e.nextSibling:e.previousSibling;if(3===n.nodeType){var r=n.nodeValue;e.nodeValue=t?e.nodeValue+r:r+e.nodeValue,n.parentNode.removeChild(n)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.initDefaultStylesheet=function(){var e=r.STYLESHEET_ID,t=document.getElementById(e);if(!t){var n=document.createTextNode(r.STYLESHEET_TEXT);(t=document.createElement("style")).id=this.styleId,t.appendChild(n),document.head.appendChild(t)}return t}}]).default});
//# sourceMappingURL=web-highlighter.min.js.map